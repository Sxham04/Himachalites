/* ==========================================================================
    1. Core Layout & Fonts
    ========================================================================== */
html, body {
    margin: 0;
    padding: 0;
    overflow-x: hidden;
}

body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    color: #333;
    display: flex;
    flex-direction: column;
    position: relative; /* Allows absolute positioning of children relative to body */
    min-height: 100vh; /* Ensures body takes at least full viewport height */
}

/* Main wrapper for all content above the landing page */
.top-content-wrapper {
    position: relative; /* THIS IS THE POSITIONING CONTEXT FOR THE DASHED LINE */
    display: flex;
    flex-direction: column; /* Stacks .state-content-sections and .content-section-spacer */
    width: 100%;
    min-height: auto; /* Allow content to define its height, crucial for responsiveness */
}



/* New wrapper for all state sections */
.state-content-sections {
    display: flex;
    flex-direction: column;
    align-items: center; /* Centers the individual state containers horizontally */
    padding-top: 50px; /* Space at the very top of your state content */
    flex-grow: 1; /* Allows this section to expand and contain its children */
    z-index: 1; /* Ensure state content is above the dashed line */
    background-color: transparent; /* Ensure no background hides the line */
}

/* Spacer to create the desired margin above the landing page */
.content-section-spacer {
    height: 10vh; /* Control this value (e.g., 50px, 0, 20vh) for the gap above landing page */
    width: 100%;
    z-index: 1; /* Ensure spacer is above the dashed line */
    background-color: transparent; /* Ensure no background hides the line */
}

/* Dashed Line Specific Styling */
.dashed-line {
    position: absolute;
    /* top and height will be set by JavaScript */
    left: 50%;
    transform: translateX(-50%);
    
    width: 100%;
    max-width: 1654px; /* Limits the max width to its intrinsic SVG width */
    height: auto; /* Allow height to scale proportionally with width initially, will be overridden by JS */
    z-index: -1;
}

.dashed-line-center {
    width: 100%; /* Make SVG fill its parent `.dashed-line` */
    height: 100%; /* This will now scale based on its parent's `height: auto` */
    display: block;
    /* `preserveAspectRatio="xMidYMin slice"` is set directly in your HTML for the SVG element */
}


/* ==========================================================================
    2. Landing Page - NO CHANGES HERE AS PER INSTRUCTION
    ========================================================================== */
#landing-page-container {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    flex-shrink: 0; /* Prevents it from shrinking */
    width: 100%; /* Ensure it takes full width */
    position: relative; /* Keep it relative if you have inner absolute elements */
    z-index: 2; /* Ensure landing page is above everything else */
}

/* --- Landing Page: Header --- */
header {
    width: 100%;
    display: flex;
    flex-direction: column;
}

.top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1% 15%;
    min-height: 60px;
    position: relative;
    font-size: 0.9em;
}

.top-bar::after {
    content: '';
    position: absolute;
    bottom: 0;
    height: 2px;
    background-color: #4a4a4a;
    left: 10%;
    right: 10%;
}

.top-bar p {
    margin: 0;
    color: black;
    font-size: 1.2em;
}

.social-links {
    display: flex;
    gap: 20px;
}

.social-links a {
    color: #333;
    text-decoration: none;
    font-size: 1.2em;
    transition: color 0.3s ease;
}

.social-links a:hover {
    color: #ccc;
}

.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 5%;
    flex-grow: 1;
}

.logo img {
    height: 140px;
    padding: 0 20px;
}

.main-nav {
    list-style: none;
    display: flex;
    margin: 0;
    padding: 20px;
    gap: 100px;
    flex: 1;
}

.nav-left {
    justify-content: flex-end;
}

.nav-right {
    justify-content: flex-start;
}

.main-nav a {
    text-decoration: none;
    color: black;
    font-weight: 150;
    font-size: 1.1em;
    padding: 20px;
    font-family: Helvetica, Arial, sans-serif;
    transition: color 0.3s ease;
}

.main-nav a:hover {
    color: #7d7d7d;
}

.main-nav a.active {
    color: #7d7d7d;
}

.mobile-menu-button {
    display: none;
    background: none;
    border: none;
    font-size: 1.8rem;
    cursor: pointer;
    color: #333;
    padding: 10px;
    z-index: 1100;
}

/* --- Landing Page: Main Content & Bottom Image --- */
.content-area {
    flex-grow: 1;
    text-align: center;
}

.bottom-image {
    width: 100%;
    height: 75vh;
    align-self: flex-end;
    margin-top: auto;
}

.bottom-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    object-position: 50% 80%;
    mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 15%);
    -webkit-mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 15%);
}

/* ==========================================================================
    3. States Section
    ========================================================================== */
.state-container {
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    padding: 2rem 0;
    position: relative; /* Keep relative if you have absolute children inside */
    margin-bottom: 60px; /* Adjust this value as needed for space between state sections */
    margin-top: 0; /* Ensure no inherited top margin */
}

.state-container--split.reverse {
    flex-direction: row-reverse;
}

.info-column {
    flex: 1 1 55%;
    min-width: 0;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 2rem 2rem 3rem 12vw;
    position: relative; /* MODIFIED: Added for positioning context */
}

/* NEW: Styles for the popup element */
.h2-popup {
    position: absolute;
    top: 3.6rem; /* Positions it within the h2's top padding */
    left: 13.8vw; /* Aligns with h2 text */
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.1rem;
    font-weight: 500;
    font-family: Helvetica, Arial, sans-serif;
    color: #333;
    z-index: 5;

    /* Initial state for animation */
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}

.h2-popup.visible {
    opacity: 1;
    transform: translateY(0);
}

.h2-popup span {
    font-weight: bold; /* or use a numeric value like 700 */
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    position: relative; /* Allows you to shift the element */
    top: 8px;
}

.h2-popup img {
    height: 50px;   /* Or any size you prefer, e.g., 1.5rem */
    width: auto;    /* Keeps the image proportions correct */
    filter: grayscale(100%); /* Make it grayscale first */
    filter: brightness(factor); /* Adjust brightness if needed */
    filter: hue-rotate(degrees);
    filter: brightness(0.3);
}


.image-column {
    flex: 0 0 45%;
    max-width: 45%;
    padding: 0 5vw;
}

.image-column img {
    width: 100%;
    height: auto;
    display: block;
    border-radius: 8px;
}

.info-column h2 {
    font-size: 4rem;
    display: inline-block;
    color: black;
    border-radius: 8px;
    margin: 0 0 0.5rem 0;
    padding: 6rem 13rem 1rem 1.5rem;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: 25% 50%;
}

.header-1 { background-image: url('img/lh bg.png'); }
.header-2 { background-image: url('img/Kin bg.png'); }
.header-3 { background-image: url('img/cha bg.png'); }
.header-4 { background-image: url('img/Kul bg.png'); }
.header-5 { background-image: url('img/Shm bg.png'); }
.header-6 { background-image: url('img/Kang bg.png'); }
.header-7 { background-image: url('img/Sir bg.png'); }
.header-8 { background-image: url('img/Man bg.png'); }
.header-9 { background-image: url('img/Sol bg.png'); }
.header-10 { background-image: url('img/Bil bg.png'); }
.header-11 { background-image: url('img/Hamir bg.png'); }
.header-12 {
    background-image: url('img/image 3.png');
    padding: 6rem 20rem 1rem 1.5rem;
}

.info-column p {
    margin: 0 0 1.5rem 0;
    padding-left: 1.8rem;
    font-size: 1.1rem;
    max-width: 50ch;
}

.info-button {
    background-color: #333;
    color: white;
    padding: 12px 24px;
    text-decoration: none;
    border-radius: 50px; /* Adjusted from 5px for a rounder look, can revert */
    transition: background-color 0.3s ease;
    margin-left: 2rem;
}

.info-button:hover {
    background-color: #0EA63C;
}

/* ==========================================================================
    4. Specific Container Tweaks & Overrides - REMOVED / RESET
/* These rules were for absolute positioning and are no longer necessary or correct.
    Ensure no fixed 'top' or conflicting 'margin' rules remain for individual state containers. */
.state-container-1, .state-container-2, .state-container-3, .state-container-4, .state-container-5,
.state-container-6, .state-container-7, .state-container-8, .state-container-9,
.state-container-10, .state-container-11, .state-container-12 {
    top: auto !important; /* Override any lingering fixed positioning */
    margin-left: 0 !important; /* Remove specific horizontal offsets */
    margin-right: 0 !important;
    padding-top: 0 !important; /* Reset specific padding */
    /* Remove any other `position`, `top`, `left`, `margin` properties here */
}

/* Ensure no column-specific overrides are left that break the flex layout */
.state-container .info-column,
.state-container .image-column {
    margin-left: auto; /* Reset margins */
    margin-right: auto; /* Reset margins */
    padding-top: auto; /* Reset padding */
    margin-top: auto; /* Reset margins */
}


/* ==========================================================================
    5. UI Elements
    ========================================================================== */
#scrollToBottomBtn {
    position: fixed;
    bottom: 25px;
    right: 25px;
    width: 50px;
    height: 50px;
    background-color: #333;
    color: white;
    border: none;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 20px;
    cursor: pointer;
    z-index: 1000;
    text-decoration: none;
    transition: background-color 0.3s ease, transform 0.3s ease, bottom 0.5s cubic-bezier(0.25, 1, 0.5, 1);
}

#scrollToBottomBtn:hover {
    background-color: #555;
    transform: scale(1.1);
}

#scrollToBottomBtn.raised {
    bottom: calc(10vh + 25px);
}

/* ==========================================================================
    6. Responsive Layout Rules
    ========================================================================== */
.mobile-only { display: block; }
.desktop-only { display: none; }

@media (min-width: 1025px) { /* Changed to 1025px to avoid overlap with max-width: 1024px */
    .mobile-only { display: none; }
    .desktop-only { display: block; }
}

@media (max-width: 1024px) { /* Changed to 1024px for clearer breakpoint */
    /* Adjustments for the top-content-wrapper for mobile */
    .top-content-wrapper {
        position: static; /* On mobile, let it flow naturally */
        min-height: auto;
        padding-top: 20px;
    }

    /* Dashed line on mobile should flow with content */
    .dashed-line {
        position: relative; 
        top: auto;
        left: auto;
        transform: none;
        width: 90%; /* Adjust width for mobile */
        height: auto; /* Height scales proportionally */
        margin: 0 auto 50px auto; /* Center and add bottom margin */
    }

    .dashed-line-center {
        width: 100%;
        height: auto;
    }
    
    /* Ensure old #states-wrapper styles are cleared if still present */
    #states-wrapper {
        margin-top: 0;
        height: auto;
        padding-top: 4rem;
        padding-bottom: 4rem;
        overflow: visible;
    }

    .state-container {
        position: static;
        margin-bottom: 5rem; /* Adjusted mobile spacing between states */
        padding: 0 1rem;
        max-height: none;
    }

    header { height: auto; padding-bottom: 1rem; }
    .top-bar { flex-direction: column; padding: 1rem; gap: 10px; text-align: center; }
    .top-bar::after { left: 5%; right: 5%; }
    
    .navbar {
        flex-wrap: wrap;
        padding: 0 1.5rem;
    }
    
    .logo {
        order: -1;
    }

    .logo img { height: 80px; padding: 0; }

    .mobile-menu-button {
        display: block;
    }
    
    .main-nav {
        display: none;
        flex-direction: column;
        width: 100%;
        order: 3;
        gap: 0;
        animation: fadeIn 0.3s ease-in-out;
    }

    .navbar.nav-open .main-nav {
        display: flex;
        margin-top: 1rem;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .main-nav a {
        padding: 1rem;
        display: block;
        width: 100%;
        text-align: center;
        border-bottom: 1px solid #eee;
    }

    .nav-left,
    .nav-right {
        width: 100%;
    }
    
    .main-nav li:last-child a {
        border-bottom: none;
    }

    .bottom-image { height: 60vh; }

    .state-container--split,
    .state-container--split.reverse {
        flex-direction: column-reverse;
    }

    .info-column,
    .image-column {
        max-width: 100%;
        flex-basis: auto;
        padding: 0;
    }
    
    /* NEW: Styles for the popup on mobile */
    .h2-popup {
        position: static; /* Revert to normal document flow */
        transform: none;  /* Reset transform */
        opacity: 1;       /* Always visible, no animation needed on mobile */
        justify-content: center;
        width: 100%;
        margin: 0 0 0.5rem 0; /* Center and add a small bottom margin */
    }

    .image-column {
        margin-bottom: 1.5rem;
    }

    .info-column { 
        padding: 0 1rem;
        align-items: center;
        text-align: center;
        position: static; /* MODIFIED: Reset positioning context */
    }

    .info-column h2 {
        font-size: 2.5rem;
        padding: 0.5rem 1rem !important; /* Modified to ensure it overrides desktop */
        background-image: none !important; /* Modified to ensure it overrides desktop */
        text-align: center;
        border: 2px solid #eee;
        margin-bottom: 1rem;
    }

    .info-column p { padding-left: 0; max-width: 90%; }
    .info-button { margin-left: 0; }

    /* Ensure these are reset for mobile to prevent conflicting behavior */
    .state-container-1, .state-container-2, .state-container-3, .state-container-4, .state-container-5, .state-container-6, .state-container-7, .state-container-8, .state-container-9, .state-container-10, .state-container-11, .state-container-12 {
        margin-bottom: 5rem !important; /* Consistent mobile spacing */
        top: auto !important;
    }
    
    .state-container:last-of-type {
        margin-bottom: 0 !important;
    }

    .state-container .image-column,
    .state-container .info-column {
        margin-left: 0 !important;
        margin-right: 0 !important;
        max-width: 100% !important;
    }

    #scrollToBottomBtn {
        width: 45px;
        height: 45px;
        font-size: 18px;
        bottom: 15px;
        right: 15px;
    }
}

/* ==========================================================================
   7. Anchored Navbar Effect (Desktop Only)
   ========================================================================== */
@keyframes popUpFromBottom {
    from {
        opacity: 0;
        transform: translateY(100%); /* Start fully below the viewport */
    }
    to {
        opacity: 1;
        transform: translateY(0); /* End at its final position */
    }
}

@media (min-width: 1025px) {
    .navbar {
        /* This transition was causing the unwanted horizontal animation. It has been removed. */
    }

    .navbar.navbar--anchored {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 8vh;
        background: rgba(255, 255, 255, 0.92);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.08);
        z-index: 1001;
        align-items: center;
        padding: 0;
        animation: popUpFromBottom 0.5s ease-out;
    }

    .navbar.navbar--anchored .main-nav {
        gap: 25px;
        flex: 1; 
    }

    .navbar.navbar--anchored .logo img {
        height: 8vh;
        max-height: 65px;
    }

    .navbar.navbar--anchored .main-nav a {
        padding: 1.5rem;
        font-size: 1em;
    }
}